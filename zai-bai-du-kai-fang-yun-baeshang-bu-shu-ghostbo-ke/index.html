<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>我道</title>
    <meta name="description" content="我叫1900，普通男青年，学过三年编程。湖南人，现在在四川工作。2015年花了26天骑过一次318。有点伪文艺，喜欢比较玄学的东西。性格多变，疑似有人格分裂。" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="favicon.ico">

    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="stylesheet" href="/css/iDisqus.min.css">
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/monokai-sublime.css">


</head>
<body class="home-template" id="s-top">

    <div class="nav">
<div class="nav_body">
  <div class="b_logo"> 
      <a class="blog-logo" href="/"><img src="/img/logo-mini.png" alt="我道" /></a>
  </div>
  <div class="b_class"> 
    <ul>
    	
    	<li class="nav-"><a class="" n_type="" href="/">首页</a></li>
      
    	<li class="nav-"><a class="" n_type="" href="/links.html">左邻</a></li>
      
    	<li class="nav-"><a class="" n_type="" href="/archive.html">归档</a></li>
      
    	<li class="nav-"><a class="" n_type="" href="/about.html">关于</a></li>
      
    	<li class="nav-"><a class="" n_type="" href="/rss.xml">订阅</a></li>
      
    </ul>
  </div>
</div>
</div>
    <div class="post-bg" style="background-image: url(http://ocxfindy0.bkt.clouddn.com/image/4/ec/9e7a8dbb0e901e080731392aa3fa0.jpg);"></div>
<div class="site-wrapper" page-type="c-post">
<main class="content" role="main">
	<div class="post-toppic" style="">
        <div class="picbox">
          <img node-type="articleHeaderPic" src="http://ocxfindy0.bkt.clouddn.com/image/4/ec/9e7a8dbb0e901e080731392aa3fa0.jpg">
        </div>
     </div>
    <article class="post">

        <header class="post-header">
            <h1 class="post-title">在百度开放云BAE上部署GHOST博客并配置七牛云</h1>
            <section class="post-meta">
                <time class="post-date" datetime="Thu Sep 08 2016 20:28:19 GMT+0800">2016/9/8</time> [object Object]
            </section>
        </header>

        <section class="post-content">
            &lt;h2 id=&#34;前言&#34;&gt;&lt;a href=&#34;#前言&#34; class=&#34;headerlink&#34; title=&#34;前言&#34;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;wordpress断断续续用了可能也有七八年了，从最早期的橡树博客（wpoak）到后来找的一些免费的服务器商，再到后来的搬瓦工，东西写了很多，不过几乎已经找不回来了。总而言之这些年用wordpress的经历就是折腾折腾再折腾，步骤都很简单：&lt;code&gt;找服务器&lt;/code&gt;，&lt;code&gt;装博客&lt;/code&gt;，&lt;code&gt;找主题&lt;/code&gt;，&lt;code&gt;折腾主题&lt;/code&gt;，感觉wordpress已经更趋向与CMS或者其他什么东西，有点本末倒置了。前几天我看到ghost的宣传语——更加纯粹的内容写作与发布平台。是呀，博客难道不是为了写文字而生的吗？其他的功能可有可无，内容和文字才是博客的灵魂。&lt;br&gt;而后了解了一下搭建GHOST平台的一些知识，也看到有网友在BAE上成功搭建起了GHOST，遂也想在BAE上尝试，不过碰到了各种问题，折腾了有些时间后整合了搜索到的几篇文章终于搭建成功，这里写一篇流程短文介绍一下如何实现的，希望能帮到其他想在BAE上搭建GHOST博客的朋友。&lt;/p&gt;
&lt;h2 id=&#34;创建BAE服务、MYSQL服务、七牛服务&#34;&gt;&lt;a href=&#34;#创建BAE服务、MYSQL服务、七牛服务&#34; class=&#34;headerlink&#34; title=&#34;创建BAE服务、MYSQL服务、七牛服务&#34;&gt;&lt;/a&gt;创建BAE服务、MYSQL服务、七牛服务&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;http://ocxfindy0.bkt.clouddn.com/image/2/5f/7e1542cd65c47b98fab44d10f1b13.png&#34; alt=&#34;BAE创建&#34;&gt;&lt;br&gt;先在bae上创建一个自定义应用，node.js版本我是使用&lt;code&gt;4.2.6&lt;/code&gt;。应用&lt;code&gt;内存选择256M&lt;/code&gt;（之前搜索到有网友说应用内存必须要256m才可以运行，这里也建议使用256M）&lt;/p&gt;
&lt;p&gt;在BAE控制面板中的左侧拓展服务中添加一个免费版的mysql服务，&lt;code&gt;有些资料说bae的免费mysql服务有长链接问题不可以使用&lt;/code&gt;，经我测试没有这个问题。&lt;/p&gt;
&lt;p&gt;记录下&lt;code&gt;mysql数据库名称&lt;/code&gt;和&lt;code&gt;AC&lt;/code&gt;，&lt;code&gt;AK&lt;/code&gt;备用。&lt;/p&gt;
&lt;h2 id=&#34;下载并上传ghost应用&#34;&gt;&lt;a href=&#34;#下载并上传ghost应用&#34; class=&#34;headerlink&#34; title=&#34;下载并上传ghost应用&#34;&gt;&lt;/a&gt;下载并上传ghost应用&lt;/h2&gt;&lt;p&gt;建议在&lt;a href=&#34;http://www.ghostchina.com/download/&#34; target=&#34;_blank&#34; rel=&#34;external&#34;&gt;ghostchina&lt;/a&gt;上下载最新的中文集成包，里面有编译好的依赖组件。之前按照网上部署失败的原因主要是没有依赖包，虽然BAE官方文档里说了会自动下载依赖项但是然并卵~，所以我们需要把ghost需要用到的组件编译好后手动传到服务器上，你可以在linux上自己编译好文件进行上传，也可以直接上传集成包里内容。&lt;/p&gt;
&lt;p&gt;使用svn将bae上应用内的文件检出到你的电脑内，然后把下载好的集成包解压到项目应用文件夹内，提示有重名文件覆盖即可，之后的文件目录大概是这样。&lt;br&gt;&lt;img src=&#34;http://ocxfindy0.bkt.clouddn.com/image/a/32/62766039542729e0d7b135588e04c.png&#34; alt=&#34;文件列表&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;配置文件&#34;&gt;&lt;a href=&#34;#配置文件&#34; class=&#34;headerlink&#34; title=&#34;配置文件&#34;&gt;&lt;/a&gt;配置文件&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt; 设置package.json&lt;/strong&gt;，这个文件是node.js的配置文件，解压处出来的文件并不能直接上传使用，有很多地方需要修改。首先删除：&lt;code&gt;devDependencies&lt;/code&gt;，&lt;code&gt;optionalDependencies&lt;/code&gt;，&lt;code&gt;dependencies&lt;/code&gt;三个字段。删除&lt;code&gt;script&lt;/code&gt;字段下的&lt;code&gt;preinstall&lt;/code&gt;字段，将&lt;code&gt;start&lt;/code&gt;字段下的&lt;code&gt;&amp;quot;start&amp;quot;: &amp;quot;node index&amp;quot;&lt;/code&gt;,修改成&lt;code&gt;&amp;quot;start&amp;quot;: &amp;quot;node index.js&amp;quot;&lt;/code&gt;。最后如下：&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;
{
&#34;name&#34;: &#34;ghost&#34;,
&#34;version&#34;: &#34;0.7.4&#34;,
&#34;description&#34;: &#34;Just a blogging platform.&#34;,
&#34;author&#34;: &#34;Ghost Foundation&#34;,
&#34;homepage&#34;: &#34;http://ghost.org&#34;,
&#34;keywords&#34;: [
 &#34;ghost&#34;,
 &#34;blog&#34;,
 &#34;cms&#34;
],
&#34;repository&#34;: {
 &#34;type&#34;: &#34;git&#34;,
 &#34;url&#34;: &#34;git://github.com/TryGhost/Ghost.git&#34;
},
&#34;bugs&#34;: &#34;https://github.com/TryGhost/Ghost/issues&#34;,
&#34;contributors&#34;: &#34;https://github.com/TryGhost/Ghost/graphs/contributors&#34;,
&#34;license&#34;: &#34;MIT&#34;,
&#34;main&#34;: &#34;./core/index.js&#34;,
&#34;scripts&#34;: {
 &#34;start&#34;: &#34;node index.js&#34;,
 &#34;test&#34;: &#34;grunt validate --verbose&#34;
},
&#34;engines&#34;: {
 &#34;node&#34;: &#34;~0.10.0 || ~0.12.0 || ~4.2.0&#34;,
 &#34;iojs&#34;: &#34;~1.2.0&#34;
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt; 设置config.js&lt;/strong&gt;,这个文件是ghost的配置文件,先复制一份&lt;code&gt;config.example.js&lt;/code&gt;改名为&lt;code&gt;config.js&lt;/code&gt;。打开文件，将&lt;code&gt;production字段&lt;/code&gt;下的内容改为如下&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;
production: {
     url: &#39;你的域名&#39;,
     database: {
         client: &#39;mysql&#39;,
         connection: {
             host: &#39;sqld.duapp.com&#39;,
             port: 4050,
             user: &#39;mysqlak&#39;, //your ak
             password: &#39;mysqlsk&#39;, //your sk
             database: &#39;数据库名称&#39;,//your dbname
             charset: &#39;utf8&#39;
         },
         debug: false
     },
     server: {
         // Host to be passed to node&#39;s `net.Server#listen()`
         host: &#39;127.0.0.1&#39;,
         // Port to be passed to node&#39;s `net.Server#listen()`, for iisnode set this to `process.env.PORT`
         port: &#39;18080&#39;
     },
     storage: {
         provider: &#39;qiniu&#39;,
         bucketname: &#39;空间名称&#39;,
         ACCESS_KEY: &#39;七牛ak&#39;,
         SECRET_KEY: &#39;七牛sk&#39;,
         root: &#39;/image/&#39;,
         prefix: &#39;七牛域名&#39;//注意，需要带上http://
     }
 }
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt; 再将&lt;/strong&gt;&lt;code&gt;core&lt;/code&gt;目录下的&lt;code&gt;index.js&lt;/code&gt;内的&lt;code&gt;process.env.NODE_ENV = process.env.NODE_ENV || &amp;#39;development&amp;#39;;&lt;/code&gt;修改为：&lt;code&gt;process.env.NODE_ENV = &amp;#39;production&amp;#39;;&lt;/code&gt;强制让ghost运行在production环境下。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt; 哦对了，还要将index.js&lt;/strong&gt;文件内的&lt;code&gt;require(&amp;#39;./core/server/utils/startup-check&amp;#39;).check();&lt;/code&gt;注释掉。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;上面设置好之后应该就可以正常使用了，希望能帮助到需要的朋友，如果有任何问题请留言和我交流。enjoy this!&lt;/p&gt;

        </section>

        <footer class="post-footer">

            <figure class="author-image">
                <a class="img" href="" style="background-image: url(/img/avatar.png)"><span class="hidden">的头像</span></a>
            </figure>


            <section class="author">
                <h4><a href=""></a></h4>

                    <p>我叫1900，普通男青年，学过三年编程。湖南人，现在在四川工作。2015年花了26天骑过一次318。有点伪文艺，喜欢比较玄学的东西。性格多变，疑似有人格分裂。</p>

                    <p>继续阅读此作者的<a href="http://www.4zen.top">更多文章</a>。</p>

                <div class="author-meta">
                    <span class="author-location icon-location">自贡</span>
                    <span class="author-link icon-link"><a href="http://www.4zen.top">http://www.4zen.top</a></span> 
                </div>
            </section>


            <section class="share">
                <h4>分享此博文</h4>
                <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

            </section>

        </footer>
	<div id="comment"></div>
    </article>

</main>
    <aside class="read-next">
        
        <a class="read-next-story" style="background-image: url(http://ocxfindy0.bkt.clouddn.com/image/3/45/43fc06efcb2f5e7f3e8c3083fd1cf.jpg)" href="/yi-tiao-dai-ma-jian-dan-huo-qu-mei-ri-bingjiao-dian-tu/">
            <section class="post">
                <h2>一条URL简单获取每日bing焦点图</h2>
                <p>缘起看着每天都是一样的顶部图片忽然觉得有点了无生趣，没有惊喜，生活不该这样。
而后又想到windows10登录界面时候的焦点图片可不可以用来做top图片，遂找了一下相关的资料，发现bing有一个接口返&hellip;</p>
            </section>

        </a>
        
        
        <a class="read-next-story prev " style="background-image: url(http://cdn.4zen.top/wp-content/uploads/2016/08/图形1.jpg" href="/a-group-of-god-restored-super-cute-shiba-inu-watch-cos/">
            <section class="post">
                <h2>一组神还原超萌柴犬守望COS</h2>
                <p>加拿大的22岁学生Taylor有一只叫VOX的柴犬，现在这只小狗成了守望圈的吉祥物，它的主人帮助它COS了很多《守望先锋》的角色。
很萌很萌有木有，而且还原度也很好好吗？！

&hellip;</p>
            </section>
        </a>
        
    </aside>

    </div>

    <div class="sidebar">  
        <a href="#s-top" class="s-top" to="#s-top"><i class="fa fa-chevron-up" action-type="goTop"></i></a>
    </div>

    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">我道</a> &copy; </section>
        <section class="poweredby">Proudly published with <a href="https://hexo.io/"> ❤ Hexo</a> &amp; <a href="https://pages.github.com/">Github Pages</a></section>
    </footer>

    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/plugin.js"></script>
    <script src="/js/index.js"></script>

</body>
</html>
