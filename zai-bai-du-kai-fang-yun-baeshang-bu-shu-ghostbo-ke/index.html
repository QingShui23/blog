<html xmlns:wb="http://open.weibo.com/wb">

<head>
    <!-- meta信息 -->
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <!-- for 360 指定内核 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="csrf-param" content="authenticity_token">
    <meta name="csrf-token" content="Ye1jEU+Jp2rM7U9W18w9f90L1uyFRscRzNhiJxi1nAB0IUfqi2aCk4ccfPMIHMsFaNujKu7s9dGA44uMo33NPw==">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    <!-- 样式表 -->
    <link rel="stylesheet" media="all" href="/css/style.css">
    <link rel="stylesheet" media="screen" href="/css/screen.css">

    <!-- 不知道是什么 -->
    <style type="text/css">
        .p_spBanner {
            margin: 20px 0 40px;
        }

        .p_spBanner_sm {
            display: none;
        }

        @media (max-width: 600px) {
            .p_spBanner_bg {
                display: none;
            }
            .p_spBanner_sm {
                display: inline;
                ;
            }
        }
    </style>

    <!--[if lt IE 9]>
    <script src="https://alioss.g-cores.com/assets/html5shiv-99cb6d655922cd55cf310aa415c20655b29fc141d48778feb15f0ca3c732cf0a.js"></script><script src="https://alioss.g-cores.com/assets/respond/1.4.2/respond.min-5098b6c38985756e424a7c59535a58c3e6c616881478ab726f0837c5c7ef8ff0.js"></script>

      <link href="https://alioss.g-cores.com/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
      <link href="/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
      <script src="/respond.proxy.js"></script>
  <![endif]-->

    <!-- 标题 -->
    <title>机核</title>

    <!-- seo信息 -->
    <meta name="keywords" content="游戏,游戏电台,游戏广播,游戏播客,电视游戏,家用机游戏,单机游戏,游戏论坛,游戏新闻,游戏视频.">
    <meta name="description" content="从游戏到生活，我们生产内容，关乎你喜爱的一切。">

    <!-- rss地址 -->
    <link href="https://www.g-cores.com/rss" rel="alternate" type="application/rss+xml" title="Gamecores Feed">

    <!-- 安卓app图标 -->
    <link rel="apple-touch-icon" href="/touch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png">

    <!-- <script src="https://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script> -->

</head>

<body class="body-fixedNavbar">
    <!-- 顶部菜单栏 -->
        <nav class="navbar navbar-default navbar-fixed-top" id="j_app_navbar" role="navigation">
      <div class="container">
        <div class="navbar_header">
          <!-- 小屏幕切换按钮 -->
          <button type="button" class="navbar_toggle" data-toggle="collapse" data-target="#j_navbarCollapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a class="navbar_brand navbar_brand-logo" id="j_logo" href="/">
            <img src="/img/logo-mini.png"
              alt="我道">
          </a>
        </div>
    
        <!-- 功能区 -->
        <div class="collapse collapsed navbar_collapse" id="j_navbarCollapse">
          <ul class="nav navbar_nav navbar_right">
            <li>
              <a href="https://www.g-cores.com/account/signup">RSS</a>
            </li>
          </ul>
          <form class="navbar_search" action="https://www.g-cores.com/search" accept-charset="UTF-8" method="get">
            <input name="utf8" type="hidden" value="✓">
            <span class="fa fa-search"></span>
            <input type="text" name="keyword" placeholder="Search">
          </form>
    
          <!-- 菜单项 -->
          <ul class="nav navbar_nav navbar_right" id="j_nav">
            
            <li>
              <a class="" n_type="" href="/">
                首页
              </a>
            </li>
            
            <li>
              <a class="" n_type="" href="/links.html">
                左邻
              </a>
            </li>
            
            <li>
              <a class="" n_type="" href="/archive.html">
                归档
              </a>
            </li>
            
            <li>
              <a class="" n_type="" href="/about.html">
                关于
              </a>
            </li>
            
            <li>
              <a class="" n_type="" href="/rss.xml">
                订阅
              </a>
            </li>
            
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
    </nav>

    <!-- 不知道是什么 -->
    <style type="text/css">
        .navbar_brand-logo {
            padding-left: 15px !important;
            margin-left: 0 !important;
        }

        .navbar_brand-affix {
            padding-right: 0 !important;
        }

        @media (min-width: 992px) {
            .navbar_brand-affix {
                margin-left: -50px !important;
            }
            .navbar_brand-logo {
                padding-left: 0 !important;
                margin-left: 0 !important;
            }
        }

        .navbar_brand-affix img {
            margin: -8px 0 0 0;
            display: inline-block !important;
        }

        .navbar_brand-affix .navbar_brand-affix_red {
            display: none !important;
        }

        .navbar_brand-affix:hover .navbar_brand-affix_white {
            display: none !important;
        }

        .navbar_brand-affix:hover .navbar_brand-affix_red {
            display: inline !important;
        }
    </style>

    <!-- 引入网页主体 -->
    <div class="wrapper">
    <!-- 文章特色图片 -->
    <div class="story_header" style="background-image: url('http://ocxfindy0.bkt.clouddn.com/image/4/ec/9e7a8dbb0e901e080731392aa3fa0.jpg')">
        <div class="story_header_cover"></div>
        <div class="story_header_imgContainer">
            <div class="story_header_imgContainer_img">
                <img data-no-retina="" alt="在百度开放云BAE上部署GHOST博客并配置七牛云" src="http://ocxfindy0.bkt.clouddn.com/image/4/ec/9e7a8dbb0e901e080731392aa3fa0.jpg">
            </div>
        </div>
        <div class="story_header_cover story_header_cover-second"></div>
        <div class="story_header_inner">
            <div class="story_header_text">
                <h1 class="story_title" id="j_title_preview">
                    在百度开放云BAE上部署GHOST博客并配置七牛云
                </h1>

                <p class="story_info">2016-09-08</p>
            </div>
        </div>
        <a class="story_user" href="/users/64104">
            <div class="story_user_border">
                <img src="/img/avatar.png" alt="1900">
            </div>
            <p class="story_user_name">
                1900
            </p>
        </a>
        <div class="story_consoles">
        </div>
    </div>

    <div class="p_disclaimer">
        本文系用户投稿，不代表机核网观点
    </div>



    <div id="j_story_18172" class="story">
        <!-- 文章主体 -->
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>wordpress断断续续用了可能也有七八年了，从最早期的橡树博客（wpoak）到后来找的一些免费的服务器商，再到后来的搬瓦工，东西写了很多，不过几乎已经找不回来了。总而言之这些年用wordpress的经历就是折腾折腾再折腾，步骤都很简单：<code>找服务器</code>，<code>装博客</code>，<code>找主题</code>，<code>折腾主题</code>，感觉wordpress已经更趋向与CMS或者其他什么东西，有点本末倒置了。前几天我看到ghost的宣传语——更加纯粹的内容写作与发布平台。是呀，博客难道不是为了写文字而生的吗？其他的功能可有可无，内容和文字才是博客的灵魂。<br>而后了解了一下搭建GHOST平台的一些知识，也看到有网友在BAE上成功搭建起了GHOST，遂也想在BAE上尝试，不过碰到了各种问题，折腾了有些时间后整合了搜索到的几篇文章终于搭建成功，这里写一篇流程短文介绍一下如何实现的，希望能帮到其他想在BAE上搭建GHOST博客的朋友。</p>
<h2 id="创建BAE服务、MYSQL服务、七牛服务"><a href="#创建BAE服务、MYSQL服务、七牛服务" class="headerlink" title="创建BAE服务、MYSQL服务、七牛服务"></a>创建BAE服务、MYSQL服务、七牛服务</h2><p><img src="http://ocxfindy0.bkt.clouddn.com/image/2/5f/7e1542cd65c47b98fab44d10f1b13.png" alt="BAE创建"><br>先在bae上创建一个自定义应用，node.js版本我是使用<code>4.2.6</code>。应用<code>内存选择256M</code>（之前搜索到有网友说应用内存必须要256m才可以运行，这里也建议使用256M）</p>
<p>在BAE控制面板中的左侧拓展服务中添加一个免费版的mysql服务，<code>有些资料说bae的免费mysql服务有长链接问题不可以使用</code>，经我测试没有这个问题。</p>
<p>记录下<code>mysql数据库名称</code>和<code>AC</code>，<code>AK</code>备用。</p>
<h2 id="下载并上传ghost应用"><a href="#下载并上传ghost应用" class="headerlink" title="下载并上传ghost应用"></a>下载并上传ghost应用</h2><p>建议在<a href="http://www.ghostchina.com/download/" target="_blank" rel="external">ghostchina</a>上下载最新的中文集成包，里面有编译好的依赖组件。之前按照网上部署失败的原因主要是没有依赖包，虽然BAE官方文档里说了会自动下载依赖项但是然并卵~，所以我们需要把ghost需要用到的组件编译好后手动传到服务器上，你可以在linux上自己编译好文件进行上传，也可以直接上传集成包里内容。</p>
<p>使用svn将bae上应用内的文件检出到你的电脑内，然后把下载好的集成包解压到项目应用文件夹内，提示有重名文件覆盖即可，之后的文件目录大概是这样。<br><img src="http://ocxfindy0.bkt.clouddn.com/image/a/32/62766039542729e0d7b135588e04c.png" alt="文件列表"></p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><ol>
<li><p><strong> 设置package.json</strong>，这个文件是node.js的配置文件，解压处出来的文件并不能直接上传使用，有很多地方需要修改。首先删除：<code>devDependencies</code>，<code>optionalDependencies</code>，<code>dependencies</code>三个字段。删除<code>script</code>字段下的<code>preinstall</code>字段，将<code>start</code>字段下的<code>&quot;start&quot;: &quot;node index&quot;</code>,修改成<code>&quot;start&quot;: &quot;node index.js&quot;</code>。最后如下：</p>
 <pre><code class="language-js">
{
"name": "ghost",
"version": "0.7.4",
"description": "Just a blogging platform.",
"author": "Ghost Foundation",
"homepage": "http://ghost.org",
"keywords": [
 "ghost",
 "blog",
 "cms"
],
"repository": {
 "type": "git",
 "url": "git://github.com/TryGhost/Ghost.git"
},
"bugs": "https://github.com/TryGhost/Ghost/issues",
"contributors": "https://github.com/TryGhost/Ghost/graphs/contributors",
"license": "MIT",
"main": "./core/index.js",
"scripts": {
 "start": "node index.js",
 "test": "grunt validate --verbose"
},
"engines": {
 "node": "~0.10.0 || ~0.12.0 || ~4.2.0",
 "iojs": "~1.2.0"
}
}
</code></pre>
</li>
<li><p><strong> 设置config.js</strong>,这个文件是ghost的配置文件,先复制一份<code>config.example.js</code>改名为<code>config.js</code>。打开文件，将<code>production字段</code>下的内容改为如下</p>
 <pre><code class="language-js">
production: {
     url: '你的域名',
     database: {
         client: 'mysql',
         connection: {
             host: 'sqld.duapp.com',
             port: 4050,
             user: 'mysqlak', //your ak
             password: 'mysqlsk', //your sk
             database: '数据库名称',//your dbname
             charset: 'utf8'
         },
         debug: false
     },
     server: {
         // Host to be passed to node's `net.Server#listen()`
         host: '127.0.0.1',
         // Port to be passed to node's `net.Server#listen()`, for iisnode set this to `process.env.PORT`
         port: '18080'
     },
     storage: {
         provider: 'qiniu',
         bucketname: '空间名称',
         ACCESS_KEY: '七牛ak',
         SECRET_KEY: '七牛sk',
         root: '/image/',
         prefix: '七牛域名'//注意，需要带上http://
     }
 }
</code></pre>
</li>
<li><p><strong> 再将</strong><code>core</code>目录下的<code>index.js</code>内的<code>process.env.NODE_ENV = process.env.NODE_ENV || &#39;development&#39;;</code>修改为：<code>process.env.NODE_ENV = &#39;production&#39;;</code>强制让ghost运行在production环境下。</p>
</li>
<li><p><strong> 哦对了，还要将index.js</strong>文件内的<code>require(&#39;./core/server/utils/startup-check&#39;).check();</code>注释掉。</p>
</li>
</ol>
<p>上面设置好之后应该就可以正常使用了，希望能帮助到需要的朋友，如果有任何问题请留言和我交流。enjoy this!</p>

    </div>

    <!-- meta信息 -->
    <div class="story_socialActions">
        <a href="javascript:;" id="j_original_like" class="story_like ">
            <span class="fa fa-thumbs-up"></span>
            <strong id="j_original_likesNum">218</strong>
        </a>
        <a href="javascript:;" id="j_original_mark" class="story_bookmark " title="收藏">
            <span class="fa fa-star"></span>
        </a>
        <a href="javascript:;" id="j_shareToWeibo" class="story_share">
            <span class="fa fa-weibo"></span>
        </a>
        <a href="javascript:;" id="j_shareToWXBtn" data-toggle="popover" title="" data-placement="top" data-container="body" data-original-title="微信扫一扫">
            <span class="fa fa-weixin"></span>
        </a>

    </div>


    <!-- 相关阅读 -->
    <div class="row story_recommendations">
        
        <div class="col-md-6">
            <a class="story_header" style="background-image: url('http://ocxfindy0.bkt.clouddn.com/image/3/45/43fc06efcb2f5e7f3e8c3083fd1cf.jpg')"
                href="http://www.1900.live/yi-tiao-dai-ma-jian-dan-huo-qu-mei-ri-bingjiao-dian-tu/">
                <div class="story_header_cover"></div>
                <div class="story_header_cover story_header_cover-second"></div>
                <div class="story_header_inner">
                    <div class="story_header_text prev">
                        <p class="story_recommendations_head">
                            上一篇
                        </p>
                        <h2 class="story_recommendations_title">
                            一条URL简单获取每日bing焦点图
                        </h2>
                        <p class="story_recommendations_info">
                            加拿大的22岁学生Taylor有一只叫VOX的柴犬，现在这只小狗成了守望圈的吉祥物，它的主人帮助它COS了很多《守望先锋》的角色。
很萌很萌有木有，而且还原度也很好好吗？！

&hellip;</p>
                        </p>
                    </div>
                </div>
            </a>
        </div>
        
        
        <div class="col-md-6">
            <a class="story_header" style="background-image: url('http://cdn.4zen.top/wp-content/uploads/2016/08/图形1.jpg')"
                href="http://www.1900.live/a-group-of-god-restored-super-cute-shiba-inu-watch-cos/">
                <div class="story_header_cover"></div>
                <div class="story_header_cover story_header_cover-second"></div>
                <div class="story_header_inner">
                    <div class="story_header_text">
                        <p class="story_recommendations_head">
                            下一篇
                        </p>
                        <h2 class="story_recommendations_title">
                            一组神还原超萌柴犬守望COS
                        </h2>
                        <p class="story_recommendations_info">
                            加拿大的22岁学生Taylor有一只叫VOX的柴犬，现在这只小狗成了守望圈的吉祥物，它的主人帮助它COS了很多《守望先锋》的角色。
很萌很萌有木有，而且还原度也很好好吗？！

&hellip;</p>
                        </p>
                    </div>
                </div>
            </a>
        </div>
        
    </div>

    <!-- 评论区 -->
    <div class="comments_backdrop">
        <div class="container">
        </div>
    </div>

</div>

    <!-- 引入页脚文件 -->
        <!-- 页脚 -->
    <footer class="footer">
        <div class="footer_contact">
            <a href="mailto:haolun@g-cores.com" target="_blank">CONTACT US | 联系我们</a>
        </div>
        <div class="footer_info">
            <img class="footer_top" data-no-retina="" src="https://alioss.g-cores.com/assets/footer_top-4c293a683d2aece39281f2cf7e9bb022c2e55dfbd963d2862d20e3690eea91ae.jpg"
                alt="">
    
            <div class="footer_logos">
                <a href="https://www.g-cores.com/categories/13">
                    <img data-no-retina="" src="https://alioss.g-cores.com/assets/footer/gadio-01-e8679bfc838ae676eead7fa354c6ab7e26f3ec7bbf093c58ccaa647ae7701de4.png"
                        alt="">
                </a>
                <a href="https://www.g-cores.com/categories/12">
                    <img data-no-retina="" src="https://alioss.g-cores.com/assets/footer/gadiopro-01-3bbe85deb999275b31c7658a0e09299751850497bbee7e10cedb6a83ab29de75.png"
                        alt="">
                </a>
                <a href="https://www.g-cores.com/categories/14">
                    <img data-no-retina="" src="https://alioss.g-cores.com/assets/footer/music-01-a744efa6c6fbba4474e9f2a4b4de64347065eddc7e9ebccc375a7de2e9829f74.png"
                        alt="">
                </a>
                <a href="https://www.g-cores.com/categories/15">
                    <img data-no-retina="" src="https://alioss.g-cores.com/assets/footer/docu-01-8640c29ee16770157814443d1dbd01ccd5b3cf007b249db6fc6523b295662d2a.png"
                        alt="">
                </a>
                <a href="https://www.g-cores.com/categories/16">
                    <img data-no-retina="" src="https://alioss.g-cores.com/assets/footer/special-01-69dcd46be43114fa958e1d969bc14297e12b193dd753fb924e07e0beff25dd37.png"
                        alt="">
                </a>
            </div>
    
            <div class="footer_follow">
                <h4>Follow us</h4>
                <p>
                    <a href="http://weibo.com/gamecore" target="_blank" class="footer_weibo"></a>
                    <a href="javascript:;" class="footer_weixin" data-toggle="tooltip" data-placement="top" title="" data-original-title="微信号：gamecores，欢迎订阅"></a>
                    <a href="http://shop124260606.taobao.com" target="_blank" class="footer_taobao"></a>
                    <a href="http://itunes.apple.com/cn/podcast/id420660752" target="_blank" class="footer_podcast"></a>
                    <a href="https://www.g-cores.com/rss" target="_blank" class="footer_rss"></a>
                </p>
            </div>
    
            <p>
                All Rights Reserved 2009-2015 GAMECORES - Terms &amp; Conditions 闽ICP备11023385号-1
            </p>
        </div>
    </footer>

    <!-- 回到顶部按钮 -->
    <a href="javascript:;" class="toTop" id="j_toTop" style="display:none;">
        <img src="https://alioss.g-cores.com/assets/totop-4489de3bdf698735aae759e5da990bc8ecb48fd5852e674fc5ba4fcdddfd3471.png" alt="">
    </a>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="/js/index.js"></script>

</body>

</html>